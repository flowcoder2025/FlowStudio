# ========================================
# FlowStudio Environment Variables
# ========================================
# 이 파일을 .env.local로 복사하고 값을 채워주세요.
# cp .env.example .env.local

# ========================================
# Supabase (데이터베이스)
# ========================================
# Supabase Dashboard → Project Settings → Database
DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres"

# ========================================
# Supabase Storage (이미지 저장)
# ========================================
# Supabase Dashboard → Project Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://[project-ref].supabase.co"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# ========================================
# NextAuth.js (인증)
# ========================================
# 로컬: http://localhost:3000
# 프로덕션: https://your-domain.com
NEXTAUTH_URL="http://localhost:3000"
# 생성: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-key"

# ========================================
# Google OAuth
# ========================================
# Google Cloud Console → APIs & Services → Credentials
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# ========================================
# Kakao OAuth
# ========================================
# Kakao Developers → 내 애플리케이션 → 앱 키 (REST API 키)
# https://developers.kakao.com/console/app
KAKAO_CLIENT_ID="your-kakao-rest-api-key"
# Kakao Developers → 내 애플리케이션 → 보안 → Client Secret
KAKAO_CLIENT_SECRET="your-kakao-client-secret"
# 콜백 URL 설정: Kakao Developers → 내 애플리케이션 → 카카오 로그인 → Redirect URI
# 로컬: http://localhost:3000/api/auth/callback/kakao
# 프로덕션: https://your-domain.com/api/auth/callback/kakao

# ========================================
# 이미지 생성 프로바이더 선택
# ========================================
# IMAGE_PROVIDER: 이미지 생성에 사용할 프로바이더
# - "google" (기본값): Google GenAI 사용 (GOOGLE_GENAI_USE_VERTEXAI로 세부 모드 선택)
# - "openrouter": OpenRouter API 사용 (분당 생성량 제한 우회)
# - "hybrid": 배치 크기 기반 자동 선택 (소량=Google, 대량=OpenRouter)
IMAGE_PROVIDER="google"

# ----------------------------------------
# 하이브리드 모드 설정 (IMAGE_PROVIDER="hybrid")
# ----------------------------------------
# IMAGE_HYBRID_THRESHOLD: 이 값 이상의 배치 생성 시 OpenRouter 사용
# 기본값: 2 (1장=Google, 2장 이상=OpenRouter)
# IMAGE_HYBRID_THRESHOLD="2"

# IMAGE_FALLBACK_ENABLED: Rate limit 에러 시 다른 프로바이더로 자동 재시도
# 기본값: true (하이브리드/단일 모드 모두에서 동작)
# IMAGE_FALLBACK_ENABLED="true"

# ========================================
# [옵션 1] Google GenAI (기본값)
# ========================================
# 세부 모드: GOOGLE_GENAI_USE_VERTEXAI
# - "false" (기본값): Google AI Studio 모드
# - "true": Vertex AI 모드 (엔터프라이즈)
GOOGLE_GENAI_USE_VERTEXAI="false"

# ----------------------------------------
# Google AI Studio 모드 (GOOGLE_GENAI_USE_VERTEXAI=false)
# ----------------------------------------
# https://aistudio.google.com/apikey 에서 API 키 발급
GOOGLE_API_KEY="your-google-ai-studio-api-key"

# ----------------------------------------
# Vertex AI 모드 (GOOGLE_GENAI_USE_VERTEXAI=true)
# ----------------------------------------
# Google Cloud Console → IAM & Admin → Settings
GOOGLE_CLOUD_PROJECT="your-google-cloud-project-id"
# 중요: gemini-3-pro-image-preview는 global만 지원
GOOGLE_CLOUD_LOCATION="global"

# Vertex AI 프로덕션 배포 시 (Vercel):
# Google Cloud Console → IAM & Admin → Service Accounts → Create → JSON 키 생성
# 전체 JSON 내용을 아래에 붙여넣기 (한 줄로)
# GOOGLE_APPLICATION_CREDENTIALS='{"type":"service_account","project_id":"...","private_key":"..."}'

# Vertex AI 로컬 개발 시:
# gcloud auth application-default login 명령으로 인증 (환경 변수 불필요)

# ========================================
# [옵션 2] OpenRouter (분당 제한 우회)
# ========================================
# IMAGE_PROVIDER="openrouter" 설정 시 필요
# OpenRouter: Google AI Studio의 분당 생성량 제한을 우회하기 위한 대안
# 동일한 Gemini 3 Pro Image 모델 사용 (google/gemini-3-pro-image-preview)
# https://openrouter.ai/keys 에서 API 키 발급
OPENROUTER_API_KEY="your-openrouter-api-key"

# ========================================
# PortOne 결제 (크레딧 충전)
# ========================================
# PortOne 콘솔 → 결제연동 → API Keys
PORTONE_API_SECRET="your-portone-api-secret"
# PortOne 콘솔 → 결제연동 → 웹훅 설정
PORTONE_WEBHOOK_SECRET="your-portone-webhook-secret"

# ========================================
# 레거시 (더 이상 사용 안 함)
# ========================================
# Phase 6에서 중앙화된 인증으로 전환되어 더 이상 필요 없음
# ENCRYPTION_KEY="your-32-byte-hex-key"
# GENAI_MODE="google-ai-studio"  # GOOGLE_GENAI_USE_VERTEXAI와 IMAGE_PROVIDER로 대체됨
