# 핸드오프 - 2026-01-27 (i18n Phase 3)

## 빌드 상태
- 타입 체크: ✅
- 빌드: ✅
- 린트: ✅ (warning 12개 - 기존 `<img>` 태그 관련, i18n 무관)

## 완료된 작업: Phase 3 (워크플로우 & 결제 시스템 번역)

### 수정된 파일
| 파일 | 변경 내용 |
|------|----------|
| `messages/ko/common.json` | workflow, payment 섹션 추가 (업종명, 액션명, 결제 텍스트) |
| `messages/en/common.json` | workflow, payment 섹션 영어 번역 추가 |
| `components/payment/CheckoutModal.tsx` | useTranslations 적용, 모든 UI 텍스트 번역 |
| `components/payment/InsufficientModal.tsx` | useTranslations 적용, 모든 UI 텍스트 번역 |
| `components/workflow/ImmersiveInputForm.tsx` | useTranslations 적용, 주요 UI 텍스트 번역 |

### 추가된 번역 키 구조

#### workflow 섹션
```json
{
  "workflow": {
    "industries": {
      "[industry-id]": { "name", "description" }  // 9개 업종
    },
    "actions": {
      "[action-id]": { "name", "description" }    // 21개 액션
    },
    "inputs": { ... },      // 25개 입력 라벨
    "options": { ... },     // 90+ 옵션 라벨
    "placeholders": { ... }, // 업종별 placeholder
    "ui": {
      "selectIndustry", "selectAction", "generateImage", "generating",
      "required", "optional", "next", "previous", "confirm", "cancel",
      "uploadImage", "referenceImage", "imageCount", "imageCountDesc",
      "aiRecommendation", "matchRate", "startWithThisWorkflow",
      "prevRecommendation", "nextRecommendation", "swipeToStartInput",
      "swipeToNavigate", "swipeToSkip", "referenceImageOptional",
      "referenceImageDesc", "readyToGenerate", "completeInputs",
      "clickToGenerate", "emptyFields", "creditCalculation",
      "generateNImages", "navigate", "close"
    }
  }
}
```

#### payment 섹션
```json
{
  "payment": {
    "packages": { "starter", "basic", "pro", "business" },
    "plans": { "free", "starter", "pro", "business" },
    "features": { "monthlyCredits", "basicImageGeneration", ... },
    "checkout": { "title", "subscription", "creditPurchase", ... },
    "insufficient": { "title", "description", "currentBalance", ... },
    "pricing": { "title", "subtitle", "creditPackages", ... }
  }
}
```

### 번역 적용 컴포넌트

#### CheckoutModal.tsx
- 결제 확인 제목
- 구독/크레딧 구매 설명
- 주문 내역, 보안 안내
- 버튼: 취소, 결제하기, 처리 중
- 에러 메시지

#### InsufficientModal.tsx
- 크레딧 부족 제목/설명
- 현재 잔액, 필요 크레딧, 부족 크레딧
- 추천 패키지 안내
- 버튼: 나중에, 크레딧 구매하기

#### ImmersiveInputForm.tsx
- AI 추천 카드 헤더/버튼
- 매칭률 라벨
- 스와이프 힌트 텍스트
- 참조 이미지 제목/설명
- 확인 카드 (준비 완료, 입력 완료 요청)
- 이미지 생성 버튼
- 키보드 힌트

## 미완료 작업 (Phase 4에서 진행)

### 워크플로우 컴포넌트 추가 번역
- `ImmersiveActionSelect.tsx` - 액션 선택 화면
- `ImmersiveResult.tsx` - 결과 화면
- `RecommendCard.tsx` - 추천 카드
- `GuideChat.tsx` - 가이드 챗

### 데이터 파일 번역 연동
- `lib/workflow/industries.ts` - 업종 데이터에서 번역 키 사용
- `lib/workflow/actions/*.ts` - 액션 데이터에서 번역 키 사용
- `lib/payment/config.ts` - 결제 설정에서 번역 키 사용

### 페이지 번역
- `app/[locale]/(main)/page.tsx` - 홈페이지
- `app/[locale]/(main)/pricing/page.tsx` - 가격 페이지
- `app/[locale]/(main)/gallery/page.tsx` - 갤러리 페이지
- `app/[locale]/(main)/result/page.tsx` - 결과 페이지

## 테스트 방법
1. `npm run dev` 실행
2. `/` 접속 → 워크플로우 입력 폼 열기 → 한국어 텍스트 확인
3. 언어 토글 → `/en` 전환
4. 영어 워크플로우 입력 폼 텍스트 확인
5. 결제 모달 테스트 (크레딧 부족 시)

## 검증 완료
```bash
npm run build    # ✅ 성공
npx tsc --noEmit # ✅ 에러 0개
npm run lint     # ⚠️ 경고 12개 (기존 - Phase 범위 외)
```

## 기술 참고

### 번역 사용 패턴
```typescript
// 클라이언트 컴포넌트
"use client";
import { useTranslations } from "next-intl";

export function Component() {
  const t = useTranslations("workflow.ui");
  return <span>{t("generateImage")}</span>;
}

// 파라미터 사용
t("emptyFields", { count: 3 })  // "3개 항목이 비어있습니다"
t("generateNImages", { count: 2, credits: 10 })  // "이미지 2장 생성하기 (10 크레딧)"
```

### 동적 번역 키
```typescript
// 업종명 동적 접근
t(`industries.${industry}.name`)

// 액션명 동적 접근
t(`actions.${actionId}.name`)
```
