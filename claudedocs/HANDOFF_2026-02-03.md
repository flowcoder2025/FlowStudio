# 핸드오프 - 2026-02-03

## 빌드 상태
- 타입 체크: ✅ PASS
- 빌드: ✅ PASS
- 린트: ⚠️ ESLint 9.x 호환성 문제 (기존 환경 이슈)

## 완료된 Phase
- Phase 17: UI/UX 개선 및 연간 구독 (8/8 Contracts) ✅

---

## Phase 17 완료 내역

### Phase 17a: 레이아웃 조정 (2 Contracts)
- [x] Contract 17.1.1: 홈화면 여백 개선 → `components/home/HomeClient.tsx`
  - py-12 → py-16 md:py-20
  - mb-12 → mb-16 (Hero, Industry Grid)
  - mb-8 → mb-12 (Search Bar)
  - mb-12 → mb-14 (Recent Workflows)

- [x] Contract 17.1.2: 정보입력 페이지 2-그리드 → `app/[locale]/(main)/workflow/[industry]/[action]/page.tsx`
  - grid md:grid-cols-3 → grid md:grid-cols-2
  - 참조이미지 없을 때 폼이 전체 너비 차지

### Phase 17b: 인터렉티브 워크플로우 연결 (2 Contracts)
- [x] Contract 17.2.1: ImmersiveActionSelect → ImmersiveInputForm 연동
  - 액션 선택 시 바로 ImmersiveInputForm 열기
  - 기존 URL 라우팅 제거 (워크플로우 페이지 직접 이동 X)
  - 생성 완료 시 결과 페이지로 이동

- [x] Contract 17.2.2: Intent 매핑 함수 추가 → `lib/workflow/intents/index.ts`
  - `getIntentForAction(actionId)` 함수 추가
  - 모든 업종의 액션 ID를 ExpressionIntent로 매핑

### Phase 17c: 연간 구독 옵션 (4 Contracts)
- [x] Contract 17.3.1: 연간 플랜 정의 → `lib/payment/config.ts`
  - Plus Yearly: ₩99,000/년 ($70)
  - Pro Yearly: ₩299,000/년 ($210)
  - Business Yearly: ₩990,000/년 ($710)
  - 헬퍼 함수: `getPlansByInterval()`, `getYearlyPlanMonthlyPrice()`

- [x] Contract 17.3.2: 월간/연간 토글 UI → `app/[locale]/(main)/pricing/page.tsx`
  - 월간/연간 토글 버튼
  - 연간 선택 시 -17% 배지 표시
  - 연간 플랜 월별 환산 가격 표시
  - 연간 청구 총액 표시

- [x] Contract 17.3.3: 한국어 번역 → `messages/ko/common.json`
  - monthly, yearly, yearlyDiscount, billedYearly, perYear 추가

- [x] Contract 17.3.4: 영어 번역 → `messages/en/common.json`
  - monthly, yearly, yearlyDiscount, billedYearly, perYear 추가

---

## 수정된 파일 목록

| 파일 | 변경 내용 |
|------|----------|
| `components/home/HomeClient.tsx` | 여백 조정 (py, mb 값 증가) |
| `app/[locale]/(main)/workflow/[industry]/[action]/page.tsx` | 3-그리드 → 2-그리드 |
| `components/workflow/ImmersiveActionSelect.tsx` | ImmersiveInputForm 연동 |
| `lib/workflow/intents/index.ts` | getIntentForAction() 함수 추가 |
| `lib/payment/config.ts` | 연간 플랜 3개 + 헬퍼 함수 |
| `app/[locale]/(main)/pricing/page.tsx` | 월간/연간 토글 UI |
| `messages/ko/common.json` | 연간 구독 번역 키 |
| `messages/en/common.json` | 연간 구독 번역 키 |

---

## 다음 작업

### 테스트 검증 필요
1. 홈화면 여백 시각적 확인 (데스크톱/모바일)
2. 업종 선택 → 액션 선택 → ImmersiveInputForm 플로우 테스트
3. 요금제 페이지 월간/연간 토글 동작 확인
4. 결제 플로우 테스트 (Polar sandbox)

### 환경 변수 설정 필요
```env
POLAR_PRODUCT_PLUS_YEARLY=
POLAR_PRODUCT_PRO_YEARLY=
POLAR_PRODUCT_BUSINESS_YEARLY=
```

---

## 미해결 이슈
- ESLint 9.x + @rushstack/eslint-patch 호환성 문제 (기존 환경 설정 이슈)
- @next/swc 버전 미스매치 경고 (15.5.7 vs 15.5.11) - 기능 영향 없음

---

## 필요 환경 설정
- 개발 서버: `pnpm dev` (포트 3000)
- Polar 연간 플랜 Product ID 설정 필요
